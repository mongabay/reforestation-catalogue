(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9819:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return le}});var n=a(2122),o=a(7294),l=a.n(o),r=a(8276),i=a(276),c=a(236),s=a(4643),d=a(6156),u=a(1163),m=a(421),p=a(4184),f=a.n(p),v=a(6641),b=a(5990),h=a(1098),g=a(18),y=a(5697),N=a.n(y),j=l().createElement,C=function(e,t){var a=e.id,n=e.name,o=e.disabled,l=e.checked,r=e.onChange,i=e.children,c=e.className;return j("div",{ref:t,className:["custom-control","custom-radio","c-radio"].concat((0,g.Z)(c?[c]:[])).join(" ")},j("input",{type:"radio",className:"custom-control-input",disabled:o,id:a,name:n,checked:l,onChange:r}),j("label",{className:"custom-control-label",htmlFor:a},i))},O=(0,o.forwardRef)(C);O.propTypes={id:N().string.isRequired,name:N().string.isRequired,disabled:N().bool,checked:N().bool,onChange:N().func,children:N().node.isRequired,className:N().string},O.defaultProps={disabled:!1,checked:!1,onChange:null,className:null};var k=O,w=l().createElement,P=function(e){var t=e.id,a=e.name,n=e.disabled,o=e.checked,l=e.onChange,r=e.children,i=e.className;return w("div",{className:["custom-control","custom-checkbox","c-checkbox"].concat((0,g.Z)(i?[i]:[])).join(" ")},w("input",{type:"checkbox",className:"custom-control-input",disabled:n,id:t,name:a,checked:o,onChange:l}),w("label",{className:"custom-control-label",htmlFor:t},r))};P.defaultProps={disabled:!1,checked:!1,onChange:null,className:null};var E=l().createElement,S=function(e){var t=e.id,a=e.options,n=e.defaultValue,l=e.value,r=e.onChange,i=e.disabled,c=e["aria-label"],s=e.className,d=e.required,u=e.showSelectAnOption,m=e.selectAnOptionText,p=(0,o.useCallback)((function(e){var t=a.find((function(t){return t.value===e.target.selectedOptions[0].value}));r(t)}),[a,r]);return E("select",{id:t,className:["c-select","custom-select"].concat((0,g.Z)(s?[s]:[])).join(" "),disabled:i,"aria-label":c,defaultValue:n,value:l,onChange:p,required:d},u&&E("option",{disabled:!0,selected:!0},m),a.map((function(e){return E("option",{key:e.value,value:e.value,disabled:e.disabled},e.label)})))};S.defaultProps={defaultValue:void 0,value:void 0,onChange:function(){return null},disabled:!1,"aria-label":null,className:void 0,required:!1,showSelectAnOption:!1,selectAnOptionText:"-- select an option --"};var x=S,Z=l().createElement,T=function(e){var t=e.id,a=e.defaultValue,n=e.value,o=e.min,l=e.max,r=e["aria-label"],i=e.className,c=e.required,s=e.disabled,u=e.onChange;return Z("input",{type:"date",id:t,className:f()("c-datepicker","form-control",(0,d.Z)({},i,!!i)),defaultValue:a,value:n,min:o,max:l,pattern:"\\d{4}-\\d{2}-\\d{2}","aria-label":r,required:c,disabled:s,onChange:u})};T.defaultProps={className:void 0,defaultValue:void 0,value:void 0,min:void 0,max:void 0,"aria-label":void 0,required:!1,disabled:!1,onChange:function(){return null}};var F=l().createElement,A=function(e){var t=e.id,a=e.defaultValue,n=e.value,o=e.min,l=e.max,r=e.step,i=e["aria-label"],c=e.className,s=e.required,u=e.disabled,m=e.marks,p=e.onChange;return F("div",{className:"c-range"},F("input",{type:"range",id:t,className:f()("custom-range",(0,d.Z)({},c,!!c)),defaultValue:a,value:n,min:o,max:l,step:r,"aria-label":i,required:s,disabled:u,onChange:p}),m&&F("div",{className:"marks"},m.map((function(e){return F("span",{key:e,"data-label":e})}))))};A.defaultProps={className:void 0,defaultValue:void 0,value:void 0,min:void 0,max:void 0,step:void 0,"aria-label":void 0,required:!1,disabled:!1,marks:void 0,onChange:function(){return null}};var _=A,I=a(4208),R=(0,c.ZP)().actions,D=(0,i.$j)(null,{removeFilter:R.removeFilter})(I.Z),V=a(2289),q=a(2894),W=a(9064),L=l().createElement;function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,d.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=function(e){var t=e.filters,a=e.projects,n=e.categoriesConfig,l=e.addFilter,r=(0,o.useState)(null),i=r[0],c=r[1],s=(0,o.useState)(2012),d=s[0],u=s[1],m=(0,o.useState)(0),p=m[0],f=m[1];return L("div",{className:"c-catalogue-filter"},h.aA.map((function(e){var o=e.fields.map((function(e){return e.id}));return L("div",{key:"category-".concat(e.id),className:"category-container"},L("div",{className:"title"},L(V.Z,{text:(0,W.b)(e.id,n)}),L("div",{className:"-bold category-label"}," ","".concat(e.label,":"))),L("div",{className:"filters-section"},L(x,{id:"select-filter-".concat(e.id),className:"filter-selector",defaultValue:null,onChange:function(t){var a=t.value,n=h.aA.find((function(t){return t.id===e.id})).fields.find((function(e){return e.id===a}));c(U(U({},n),{},{category:e.id,value:a}))},options:e.fields.filter((function(e){return!e.hidden})).map((function(e){return U(U({},e),{},{label:e.label,value:e.id})})),showSelectAnOption:!0,selectAnOptionText:"Add filter"}),i&&i.category===e.id&&function(e){return e.type===v.Kp.String?L("div",{className:"select-filter"},L(x,{options:(0,q.ds)(a,e.value,e.commaSeparated).map((function(e){return{value:e,label:e}})),showSelectAnOption:!0,selectAnOptionText:"Select a value",onChange:function(t){var a=t.value;l({mode:e.mode,type:e.type,propertyName:e.value,label:e.label,value:a}),c(null)}})):e.type===v.Kp.Boolean?L("div",{className:"radio-filter"},L(k,{id:"yes-radio",className:"yes-radio",name:"yes-no-radio",disabled:!1,checked:!1,onChange:function(){c(null),l({mode:e.mode,type:e.type,propertyName:e.value,label:e.label,value:!0})}},"YES"),L(k,{id:"no-radio",className:"no-radio",name:"yes-no-radio",checked:!1,disabled:!1,onChange:function(){c(null),l({mode:e.mode,type:e.type,propertyName:e.value,label:e.label,value:!1})}},"NO")):e.type===v.Kp.Year?L("div",{className:"year-filter"},L(_,{min:2e3,max:2021,defaultValue:2012,onChange:function(e){var t=e.target.value;return u(t)}}),L("span",{className:"year-value"},d),L("button",{className:"btn btn-secondary",onClick:function(){c(null),l({mode:e.mode,type:e.type,propertyName:e.value,label:e.label,value:d})}},"Apply")):e.type===v.Kp.Number?L("div",{className:"number-filter"},L("input",{type:"number",step:"100",onChange:function(e){var t=e.target.value;return f(Number(t))},defaultValue:0}),L("button",{className:"btn btn-secondary",onClick:function(){c(null),l({mode:e.mode,type:e.type,propertyName:e.value,label:e.label,value:p})}},"Apply")):void 0}(i),L("div",{className:"filters-applied"},t&&t.filter((function(e){return o.includes(e.propertyName)})).map((function(e){return L(D,{key:"pill-".concat(e.propertyName),filter:e,linkMode:!1})})))))})))},Y=(0,c.ZP)().actions,J=(0,i.$j)((function(e){return{filters:(0,c.mj)(e),projects:(0,c.FN)(e),categoriesConfig:(0,s.us)(e)}}),{addFilter:Y.addFilter})(K),Q=a(1165),$=l().createElement,B=function(e){var t=e.project,a=e.highlightedCategory,n=e.openInNewWindow;return $("div",{className:"c-project-card",onClick:function(){return n?window.open("/project?id=".concat(t.projectNumber),"_blank"):u.default.push("/project?id=".concat(t.projectNumber))}},$(Q.Z,{project:t,highlightedCategory:a,cardMode:!0}))},H=a(1838),X=a(4154),G=a(6362),z=l().createElement;var ee=function(e){var t=e.projects,a=e.sort,n=e.country,l=e.filters,r=e.initialQuery,i=e.updateData,c=e.setConfig,s=e.countries,p=e.updateCountry,g=e.updateSort,y=e.loadInitialState,N=e.projectsPage,j=e.totalNumberOfProjects,C=e.embed,O=e.embedType,k=(0,u.useRouter)(),w=r.country,P=r.sort,E=r.filters,S=r.embed,Z=r.embedType,T=r.id;(0,o.useEffect)((function(){w||P||E||S||Z?y({country:w,sort:P,filters:JSON.parse(E),embed:!0===S||"true"===S,embedType:Z,id:T}):(p(v.yn.ALL),g(h.aP[0].value)),(0,X.c)().then((function(e){return c(e.data)})).catch((function(e){return console.error(e)})),(0,h.m6)().then((function(e){return i(e.data)})).catch((function(e){return console.error(e)}))}),[]),(0,o.useEffect)((function(){var e="/?sort=".concat(encodeURIComponent(a),"&country=").concat(encodeURIComponent(n),"&filters=").concat(encodeURIComponent(JSON.stringify(l)),"&embed=").concat(C,"&embedType=").concat(O,"&id=").concat(T);k.push(e,void 0,{shallow:!0})}),[a,n,l,C,O,T]);var F=t.length,A=Math.round(100*F/j),_=C&&O===v.v_.Filters,I=C&&O===v.v_.ProjectList,R=C&&O===v.v_.ProjectCard,D=t.find((function(e){return"".concat(e.projectNumber)===T})),V=function(e){var o;return z("div",{className:f()({"main-container":!0,"-mobile":e,"-desktop":!e})},!C&&z("div",{className:"top-container"},z("div",{className:"column col-sm-10 col-md-8 col-xl-6 col-offset-1"},z("div",{className:"title"},z("h2",null,"MONGABAY"),z("h1",null,"REFORESTATION DIRECTORY")),z("p",null,null===N||void 0===N?void 0:N.descriptionText))),R&&D&&z("div",{className:"embed-project-card"},z(B,{project:D,openInNewWindow:!0})),z("div",{className:f()({"data-container":!0,"-mobile":e,"-desktop":!e})},z("div",{className:f()({"left-container":!0,"-hidden":I,"-no-width-restriction":_,"-mobile":e,"-desktop":!e})},!C&&z("div",{className:"intro-container"},z("h3",null,"A Transparency Index."),z("div",{className:"legend-chart"},z(H.Z,{categoriesPercentages:(o={},(0,d.Z)(o,v.WD.Context,70),(0,d.Z)(o,v.WD.Ecological,70),(0,d.Z)(o,v.WD.Economic,70),(0,d.Z)(o,v.WD.Social,70),(0,d.Z)(o,v.WD.Institutional,70),o),highlightedCategory:a,legendMode:!0})),z("div",{className:"legend-text"},z("p",null,"Every project in the database is represented with a circular diagram made of five lines, each corresponding to a category: ",z("span",{className:"-bold"},"context"),","," ",z("span",{className:"-bold"},"ecological"),", ",z("span",{className:"-bold"},"economic"),", ",z("span",{className:"-bold"},"social"),", and",z("span",{className:"-bold"}," institutional"),". The completeness of the line indicates how much information is publicly disclosed about the project."),z("p",{className:"-italic"},"Diagrams with black lines means that projects are ongoing, while gray lines denote projects that are no longer active."),z("p",{className:"-italic"},"The orange line highlights the category selected to sort the projects from greatest to least transparency."))),(!C||_)&&z("div",{className:"intro-filters-container"},z("h3",null,null===N||void 0===N?void 0:N.findProjectsOfInterestTitle),z("p",null,null===N||void 0===N?void 0:N.fintProjectsOfInterestDescription),z("p",{className:"-bold"},"".concat(F," projects (").concat(A,"%) meet your filtering criteria")),z(J,null))),_&&z("div",{className:"embed-filters-button-container"},z("a",{className:"btn btn-primary",href:"".concat(window.location).replace("embed=true","embed=false"),target:"_blank",rel:"noreferrer"},"View on the Reforestation Catalogue")),(!C||I)&&z("div",{className:f()({"right-container":!0,"-fullwidth":C&&O===v.v_.ProjectList,"-mobile":e,"-desktop":!e})},z("div",{className:"projects-list"},!C&&z("div",{className:f()({"list-header":!0,"-mobile":e,"-desktop":!e})},z("div",{className:"sort-container"},z("label",{htmlFor:"sort-select"},"Sort by category"),z(x,{id:"sort-select",options:h.aP,defaultValue:a,value:a,onChange:function(e){var t=e.value;g(t)}})),z("div",{className:"country-container"},z("label",{htmlFor:"country-select"},"Country: "),z(x,{id:"country-select",options:s.map((function(e){return{value:e,label:e}})),onChange:function(e){var t=e.value;return p(t)},defaultValue:n,value:n}))),z("div",{className:"project-cards-container"},z("div",{className:f()({row:!0,"justify-content-between":!e,"justify-content-center":e})},t&&t.map((function(e){return z(m.E.div,{key:e.projectNumber,className:"column",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}},z(B,{project:e,highlightedCategory:a,openInNewWindow:I}))}))))))))};return z("div",{className:"home-layout"},!C&&z(G.Z,null),z(b.C1,null,z(b.ij,null,V(!0)),z(b.Hi,null,V(!1))))},te=(0,c.ZP)().actions,ae=(0,s.ZP)().actions,ne=(0,i.$j)((function(e){return{projects:(0,c.FN)(e),countries:(0,c.U8)(e),sort:(0,c.sI)(e),embed:(0,c.RH)(e),embedType:(0,c.P0)(e),country:(0,c.C2)(e),filters:(0,c.mj)(e),totalNumberOfProjects:(0,c.LK)(e),projectsPage:(0,s.QL)(e)}}),{addFilter:te.addFilter,removeFilter:te.removeFilter,updateData:te.updateData,updateCountry:te.updateCountry,updateSort:te.updateSort,updateFilters:te.updateFilters,loadInitialState:te.loadInitialState,setConfig:ae.setConfig})(ee),oe=l().createElement;var le=function(e){var t=(0,o.useState)(void 0),a=t[0],l=t[1];return(0,o.useEffect)((function(){try{var e=location.search.substring(1),t=JSON.parse('{"'+e.replace(/&/g,'","').replace(/=/g,'":"')+'"}',(function(e,t){return""===e?t:decodeURIComponent(t)}));l(t)}catch(a){l({})}}),[]),a?oe(r.Z,{className:"p-home",meta:{title:"Mongabay Reforestation Catalogue",description:"Welcome to Mongabay\u2019s directory of reforestation and tree-planting projects.",thumbnailURL:"https://reforestation.app/images/mongabay-meta-image.png"}},oe(ne,(0,n.Z)({},e,{initialQuery:a}))):null}},4154:function(e,t,a){"use strict";a.d(t,{c:function(){return l}});var n=a(9669),o=a.n(n),l=function(){return o().get("/data/config.json").then((function(e){return e}))}},8581:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9819)}])},1163:function(e,t,a){e.exports=a(2441)}},function(e){e.O(0,[774,900,885,351,507,599,979,89],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);